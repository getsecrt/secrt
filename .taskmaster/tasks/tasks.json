{
  "master": {
    "tasks": [
      {
        "id": 1,
        "title": "Add TOML config file support",
        "status": "done",
        "priority": "high",
        "dependencies": [],
        "subtasks": [
          {
            "id": 1,
            "title": "Add toml + dirs crate dependencies",
            "status": "done"
          },
          {
            "id": 2,
            "title": "Create config module (src/config.rs)",
            "status": "done"
          },
          {
            "id": 3,
            "title": "Add file permission checks",
            "status": "done"
          },
          {
            "id": 4,
            "title": "Integrate config into CLI resolution",
            "status": "done"
          },
          {
            "id": 5,
            "title": "Auto-set 0600 permissions on config creation",
            "status": "deferred"
          },
          {
            "id": 6,
            "title": "Add tests for config loading and precedence",
            "status": "done"
          },
          {
            "id": 7,
            "title": "Update help text to mention config file",
            "status": "done"
          }
        ]
      },
      {
        "id": 2,
        "title": "Add optional OS keychain support",
        "status": "done",
        "priority": "medium",
        "dependencies": [
          1
        ],
        "subtasks": [
          {
            "id": 1,
            "title": "Add keyring dependency with feature flag",
            "status": "done"
          },
          {
            "id": 2,
            "title": "Implement keychain get/set helpers",
            "status": "done"
          },
          {
            "id": 3,
            "title": "Integrate keychain into CLI resolution",
            "status": "done"
          },
          {
            "id": 4,
            "title": "Add tests for keychain integration",
            "status": "deferred",
            "description": "Keychain tests require OS interaction; covered by stub/compile tests for now."
          }
        ]
      },
      {
        "id": 3,
        "title": "Measure binary size impact",
        "status": "done",
        "priority": "high",
        "dependencies": [],
        "subtasks": [
          {
            "id": 1,
            "title": "Record baseline release binary size",
            "description": "1,334,496 bytes",
            "status": "done"
          },
          {
            "id": 2,
            "title": "Measure size after config file support",
            "description": "1,450,976 bytes (+116,480 / +8.7%)",
            "status": "done"
          },
          {
            "id": 3,
            "title": "Measure size after keychain support",
            "description": "1,452,208 bytes (+1,232 / +0.08% over config-only)",
            "status": "done"
          },
          {
            "id": 4,
            "title": "Report size comparison",
            "status": "done"
          }
        ]
      },
      {
        "id": 4,
        "title": "macOS code signing and notarization",
        "description": "Sign and notarize the macOS binary using an Apple Developer ID so users don't get Gatekeeper warnings. JD has an existing Apple Developer account.",
        "status": "done",
        "priority": "high",
        "dependencies": [],
        "subtasks": [
          {
            "id": 1,
            "title": "Build macOS binaries (universal + arch-specific)",
            "status": "done"
          },
          {
            "id": 2,
            "title": "Code sign with Developer ID Application certificate",
            "status": "done"
          },
          {
            "id": 3,
            "title": "Notarize with Apple via notarytool",
            "status": "done"
          },
          {
            "id": 4,
            "title": "Staple the notarization ticket",
            "status": "done",
            "description": "N/A for standalone binaries \u2014 macOS checks the ticket online. Stapling only applies to .app/.pkg/.dmg bundles."
          },
          {
            "id": 5,
            "title": "Add GitHub Actions CI workflow for macOS signing",
            "status": "done"
          }
        ]
      },
      {
        "id": 5,
        "title": "Windows code signing with Azure Trusted Signing",
        "description": "Sign the Windows .exe using Azure Trusted Signing (replaced original SSL.com plan). Both amd64 and arm64 Windows binaries are built and signed in CI.",
        "status": "done",
        "priority": "high",
        "dependencies": [],
        "subtasks": [
          {
            "id": 1,
            "title": "Cross-compile Windows binary (amd64 + arm64)",
            "status": "done"
          },
          {
            "id": 2,
            "title": "Sign with Azure Trusted Signing",
            "status": "done"
          },
          {
            "id": 3,
            "title": "Verify Authenticode signature",
            "status": "done"
          },
          {
            "id": 4,
            "title": "Add GitHub Actions CI workflow for Windows signing",
            "status": "done"
          }
        ]
      },
      {
        "id": 6,
        "title": "Linux and cross-platform distribution",
        "description": "Linux binaries don't need code signing per se, but proper distribution channels need their own packaging and trust mechanisms. Musl builds and SHA-256 checksums are done via CI. Remaining: GPG signatures, Homebrew tap, crates.io, Linux package repos.",
        "status": "pending",
        "priority": "medium",
        "dependencies": [],
        "subtasks": [
          {
            "id": 1,
            "title": "Build static Linux binaries (musl)",
            "status": "done"
          },
          {
            "id": 2,
            "title": "Generate SHA-256 checksums and GPG signatures",
            "status": "pending",
            "description": "SHA-256 checksums are generated in CI. GPG signing of the checksums file is not yet implemented."
          },
          {
            "id": 3,
            "title": "Create Homebrew tap",
            "status": "pending"
          },
          {
            "id": 4,
            "title": "Publish to crates.io",
            "status": "pending"
          },
          {
            "id": 5,
            "title": "Evaluate APT/RPM/AUR packaging",
            "status": "pending"
          }
        ]
      },
      {
        "id": 7,
        "title": "GitHub Actions release workflow",
        "description": "Unified CI workflows that build, sign, and publish releases for all platforms on git tag push. Two workflows exist: release-cli.yml (cli/v* tags) and release-server.yml (server/v* tags). Core workflow is complete. Remaining: Homebrew auto-update.",
        "status": "done",
        "priority": "high",
        "dependencies": [
          4,
          5,
          6
        ],
        "subtasks": [
          {
            "id": 1,
            "title": "Define stable artifact naming convention",
            "status": "done"
          },
          {
            "id": 2,
            "title": "Create release workflow triggered on version tags",
            "status": "done"
          },
          {
            "id": 3,
            "title": "Auto-create GitHub Release with artifacts",
            "status": "done"
          },
          {
            "id": 4,
            "title": "Add download links to README",
            "status": "done"
          },
          {
            "id": 5,
            "title": "Update Homebrew formula on release",
            "status": "pending",
            "description": "Blocked on Homebrew tap creation (task 6 subtask 3)."
          },
          {
            "id": 6,
            "title": "Document release workflow in CLAUDE.md for agent automation",
            "status": "done"
          }
        ]
      },
      {
        "id": 9,
        "title": "Redesign interactive secret input: single-line default, --multi-line, --trim",
        "description": "Redesign how `secrt create` reads secrets interactively. Implemented --multi-line (-m) and --trim flags with full test coverage.",
        "status": "done",
        "priority": "medium",
        "dependencies": [],
        "subtasks": [
          {
            "id": 1,
            "title": "Add --multi-line (-m) and --trim flags to arg parser",
            "status": "done"
          },
          {
            "id": 2,
            "title": "Refactor read_plaintext for single-line vs multi-line TTY input",
            "status": "done"
          },
          {
            "id": 3,
            "title": "Implement --trim flag behavior",
            "status": "done"
          },
          {
            "id": 4,
            "title": "Add tests for new flags and input modes",
            "status": "done"
          },
          {
            "id": 5,
            "title": "Update help text and documentation",
            "status": "done"
          }
        ]
      },
      {
        "id": 10,
        "title": "Hash owner_key (IP address) for privacy",
        "description": "Replaced raw IP storage with HMAC-SHA256 hashed owner_key (OwnerHasher). Public create uses hash_ip(), authenticated paths use 'apikey:' or 'user:' prefixes. Burn and quota enforcement work on hashed keys. Tests cover cross-user burn isolation.",
        "status": "done",
        "priority": "high",
        "dependencies": [],
        "subtasks": [
          {
            "id": 1,
            "title": "Add HMAC-SHA256 helper with rotating daily secret",
            "status": "done"
          },
          {
            "id": 2,
            "title": "Replace raw IP storage with hashed owner_key in Create handler",
            "status": "done"
          },
          {
            "id": 3,
            "title": "Update clientIP/ownerKey resolution in Burn handler",
            "status": "done"
          },
          {
            "id": 4,
            "title": "Write migration to hash existing owner_key values",
            "status": "done",
            "description": "Not needed \u2014 project was pre-production when this shipped."
          },
          {
            "id": 5,
            "title": "Add tests for hashed quota enforcement and burn auth",
            "status": "done"
          },
          {
            "id": 6,
            "title": "Review server access logs for IP leakage",
            "status": "done",
            "description": "Covered by Caddy privacy logging guide (docs/caddy-privacy-logging.md)."
          }
        ]
      },
      {
        "id": 11,
        "title": "Investigate release binary size optimization",
        "description": "Cancelled — release profile is already fully optimized (opt-level=z, lto, codegen-units=1, strip, panic=abort, ring override at opt-level=3). UPX is a non-starter (AV false positives). No further gains without gutting features.",
        "status": "cancelled",
        "priority": "low",
        "dependencies": [],
        "subtasks": [
          {
            "id": 1,
            "title": "Audit current Cargo.toml [profile.release] settings",
            "status": "pending"
          },
          {
            "id": 2,
            "title": "Test UPX compression \u2014 measure size reduction and check for AV false positives",
            "status": "pending"
          },
          {
            "id": 3,
            "title": "Test opt-level = \"z\" \u2014 measure size reduction and PBKDF2 speed impact",
            "status": "pending"
          },
          {
            "id": 4,
            "title": "Test per-crate opt-level override (ring at opt-level 3, rest at z)",
            "status": "pending"
          },
          {
            "id": 5,
            "title": "Document findings and recommendation",
            "status": "pending"
          }
        ]
      },
      {
        "id": 8,
        "title": "Add coverage exclusion annotations to untestable code",
        "description": "Rust's #[coverage(off)] attribute is still unstable (tracking issue rust-lang/rust#134749). Once stabilized on stable Rust, annotate the ~129 lines of genuinely untestable code (main.rs I/O wiring, ring crypto internal errors, unreachable branches) so cargo llvm-cov reports accurate achievable coverage. See docs/test-coverage.md 'Theoretical Coverage Ceiling' section for the full list.",
        "status": "pending",
        "priority": "low",
        "dependencies": [],
        "subtasks": []
      },
      {
        "id": 12,
        "title": "Ensure Settings page buttons follow design system",
        "description": "Audit all buttons in the Settings page (SettingsPage.tsx) for consistency with the .btn / .btn-primary / .btn-danger design system classes. Covers: Create Key button, Revoke buttons, Copy button on new key display, Delete Account button, Confirm Delete button, Cancel button. Ensure hover/disabled/active states are correct and consistent with buttons elsewhere in the app.",
        "status": "done",
        "priority": "medium",
        "dependencies": [],
        "subtasks": []
      },
      {
        "id": 13,
        "title": "Ensure all page headings use the header class",
        "description": "Handled by CardHeading component used for page headings throughout the app.",
        "status": "done",
        "priority": "medium",
        "dependencies": [],
        "subtasks": []
      },
      {
        "id": 14,
        "title": "Ensure all links use the link class",
        "description": "Audit all pages in the web frontend to ensure anchor tags and navigation links correctly use the .link CSS class from the design system. Check: inline text links, 'Create a Secret' link on empty dashboard, 'Settings' links, 'Already have an account?' / 'Log In' links on auth pages, footer links, any other clickable text that should be styled as a link.",
        "status": "done",
        "priority": "medium",
        "dependencies": [],
        "subtasks": []
      },
      {
        "id": 16,
        "title": "Dashboard page: bring in line with design system",
        "description": "The DashboardPage.tsx has significant design system inconsistencies. Multiple elements use ad-hoc inline Tailwind instead of the established .btn, .btn-danger, .link, .heading component classes. The page needs a thorough pass to use design tokens and component classes consistently.",
        "status": "done",
        "priority": "medium",
        "dependencies": [],
        "subtasks": [
          {
            "id": 1,
            "title": "Fix burn buttons: use .btn .btn-danger for 'Yes, burn' and .btn for 'Cancel'",
            "status": "pending",
            "description": "Lines 138-162: burn confirmation and initial burn button use raw Tailwind (text-xs text-red-600 hover:text-red-700). Should use .btn .btn-danger (small variant) and .btn respectively."
          },
          {
            "id": 2,
            "title": "Fix pagination buttons: use .btn class",
            "status": "pending",
            "description": "Lines 174-192: Previous/Next buttons use raw Tailwind (text-sm text-muted hover:text-text disabled:opacity-50). Should use .btn with appropriate sizing."
          },
          {
            "id": 3,
            "title": "Fix settings link: use .link class",
            "status": "pending",
            "description": "Lines 199-205: 'Manage API Keys & Account Settings' is a <button> styled as text. Should be an <a> with .link class or a proper .btn."
          },
          {
            "id": 4,
            "title": "Improve empty state design",
            "status": "pending",
            "description": "Lines 94-104: The empty state is minimal. Consider adding an icon, better spacing, and a more inviting call-to-action using design system components."
          },
          {
            "id": 5,
            "title": "Add table styling to design system",
            "status": "pending",
            "description": "The secrets table uses ad-hoc border/spacing classes. Consider adding a .table component class to styles.css for consistent table styling across Dashboard and Settings pages. Both pages share the same table pattern (border-b border-border, text-muted headers, etc.)."
          },
          {
            "id": 6,
            "title": "Standardize error alert pattern",
            "status": "pending",
            "description": "Lines 87-89: Error alert uses inline Tailwind (rounded-md bg-red-100 px-3 py-2 text-sm text-red-700 dark:bg-red-900/30 dark:text-red-400). This exact pattern is duplicated in SettingsPage. Extract to a reusable .alert-error class or component."
          }
        ]
      },
      {
        "id": 17,
        "title": "Define .label heading class or migrate to .heading",
        "description": "Resolved: .label class defined in styles.css for card-level section headings. Used across DashboardPage, SettingsPage, LoginPage, RegisterPage, SendPage, etc.",
        "status": "done",
        "priority": "high",
        "dependencies": [],
        "subtasks": []
      },
      {
        "id": 18,
        "title": "Extract reusable Alert component",
        "description": "Resolved: extracted .alert-error utility class in styles.css. All 8 alert instances across 6 files now use it consistently with error design tokens, border, and normalized icon sizing.",
        "status": "done",
        "priority": "medium",
        "dependencies": [],
        "subtasks": []
      },
      {
        "id": 15,
        "title": "Investigate app-layer IP privacy and deployment posture signaling",
        "description": "Explore whether secrt-server should truncate/hash IP addresses at the application layer (before rate limiting, owner_key derivation, or any logging) so the app itself never processes full IPs \u2014 regardless of reverse proxy configuration.\n\nRelated but distinct from task #10 (hash owner_key): this is broader and includes investigating what observable privacy properties the server could honestly assert and signal to clients.\n\nAreas to investigate:\n\n1. **App-layer IP truncation** \u2014 Truncate IPs (zero last octet for IPv4, last 80 bits for IPv6) immediately on receipt, before any use. This is a real, code-level guarantee the app controls. Evaluate impact on rate limiting accuracy and quota enforcement. Compare with the HMAC approach in task #10.\n\n2. **Client-observable signals** \u2014 What can the CLI or web client actually verify from the outside? E.g., TLS version, HSTS, absence of Server header, response headers. Identify which deployment properties are externally testable vs. trust-based.\n\n3. **Privacy posture endpoint/header** \u2014 Evaluate whether a lightweight mechanism (e.g., a response header or /.well-known/secrt.json) declaring the server's privacy posture is worthwhile. Prior art: security.txt (RFC 9116, successful), P3P (dead), Tk header (deprecated), privacy.txt IETF draft (stalled), GPC .well-known/gpc.json (active but different scope). Key tension: these are self-attested and unverifiable. Only worth doing if the CLI would act on it (e.g., warn if a server doesn't claim zero-knowledge).\n\n4. **Scope boundary** \u2014 Clearly document what the app layer can guarantee vs. what requires operator trust (reverse proxy log config, TLS termination, etc.). This is important for the project's security narrative.\n\nGoal: produce a recommendation on what (if anything) to implement, with clear rationale. May result in concrete subtasks or a 'not worth it' conclusion.",
        "status": "pending",
        "priority": "low",
        "dependencies": [],
        "subtasks": [
          {
            "id": 1,
            "title": "Evaluate app-layer IP truncation: impact on rate limiting and quota accuracy",
            "status": "pending"
          },
          {
            "id": 2,
            "title": "Inventory client-observable deployment properties (TLS, headers, etc.)",
            "status": "pending"
          },
          {
            "id": 3,
            "title": "Assess privacy posture signaling: header vs .well-known vs skip",
            "status": "pending"
          },
          {
            "id": 4,
            "title": "Document app-layer vs operator-layer privacy guarantees boundary",
            "status": "pending"
          },
          {
            "id": 5,
            "title": "Write recommendation with rationale",
            "status": "pending"
          }
        ]
      },
      {
        "id": 19,
        "title": "Fix iOS auto-zoom on input focus (font-size < 16px)",
        "description": "Resolved by removing text-sm from inputs, so they inherit 16px+ base font size and no longer trigger iOS auto-zoom.",
        "status": "done",
        "priority": "high",
        "dependencies": [],
        "subtasks": [
          {
            "id": 1,
            "title": "Bump --text-base to 1rem or set .input/.textarea/.select to font-size: 1rem",
            "status": "done"
          },
          {
            "id": 2,
            "title": "Test on iOS Safari to confirm zoom no longer triggers",
            "status": "done"
          }
        ]
      },
      {
        "id": 20,
        "title": "Increase base font size for mobile readability",
        "description": "Resolved alongside task 19 by removing text-sm usage, resulting in larger readable fonts on mobile.",
        "status": "done",
        "priority": "high",
        "dependencies": [
          19
        ],
        "subtasks": []
      },
      {
        "id": 21,
        "title": "Add safe-area-inset padding for notched iPhones",
        "description": "No env(safe-area-inset-*) handling. Nav/footer content can get clipped on iPhones with notch/Dynamic Island. Need viewport-fit=cover meta tag and env() padding on nav, footer, and layout container.",
        "status": "pending",
        "priority": "medium",
        "dependencies": [],
        "subtasks": []
      },
      {
        "id": 22,
        "title": "Verify touch-friendly file selection in FileDropZone",
        "description": "Resolved — a visible tap-to-upload button/link provides a touch-friendly file selection affordance on mobile.",
        "status": "done",
        "priority": "medium",
        "dependencies": [],
        "subtasks": []
      },
      {
        "id": 23,
        "title": "Enable server-side compression (gzip/brotli)",
        "description": "No Content-Encoding served. Assets transfer at full size (157KB vs ~46KB gzip / ~38KB brotli). Caddy needs encode br gzip (brotli requires xcaddy custom build). Alternatively, Rust server could serve pre-compressed files.",
        "status": "done",
        "priority": "high",
        "dependencies": [],
        "subtasks": []
      },
      {
        "id": 24,
        "title": "Exclude test pages from Tailwind content scanning",
        "description": "Cancelled — test pages cleaned up and no longer introduce extraneous Tailwind classes.",
        "status": "cancelled",
        "priority": "low",
        "dependencies": [],
        "subtasks": []
      },
      {
        "id": 25,
        "title": "Investigate dropdown menu wider than username button",
        "description": "Resolved — forced a minimum width on the name field so the trigger button matches the dropdown width.",
        "status": "done",
        "priority": "medium",
        "dependencies": [],
        "subtasks": []
      }
    ]
  }
}
